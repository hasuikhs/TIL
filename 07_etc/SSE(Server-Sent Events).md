# SSE(Server-Sent Events)
## 1. SSE?
- 전통적으로 웹 페이지에서 새로운 데이터를 받기 위해 서버로 요청을 보냄
  - HTML5 이전에는 웹에서 실시간 정보를 응답받아야할 때 외부 플러그인이나 서버 푸시를 흉내낸 AJAX 폴링 기법 등을 사용
  - 하지만 플러그인 종속적인 웹은 해당 플러그인을 설치해야한다는 부담
  - 폴링처럼 주기적인 요청 시에는 대역폭 낭비
- **HTML5의 표준 스팩으로 웹 페이지의 요청 없이도 언제든지 서버가 새로운 데이터를 보내는 것이 가능**
  - 일반적인 HTTP 요청은 응답 받으면 연결을 끊지만, SSE는 서버와 클라이언트가 연결되면, 별도의 요청없이 서버에서 데이터를 전송 가능
  - IE를 제외한 대부분의 브라우저에서 지원
- 주로 서버에서 받는 푸쉬 **알람 위주의 작업에 사용**될 수 있음(실시간 데이터 스트리밍)
- 웹 소켓의 역할을 어느정도 대체 가능하면서 더 가벼움
- **클라이언트에서 페이지를 닫아도 서버에서 감지하기가 어려움**
- 최대 동시 접속 수는 HTTP/1.1은 6/브라우저이며, HTTP/2는 100/브라우저
  - 탭을 6개 이상 열리면 안 될 수 있음

## 2. vs Web Socket
- 웹 소켓은 양방향으로 데이터를 주고 받을 수 있음
- 웹 소켓은 별도의 프로토콜을 사용하지만, SSE는 HTTP를 사용
  - **접속을 위해서는 HTTP를 사용하지만 이후 통신은 웹 소켓 독자 프로토콜이 사용됨**
- 웹 소켓은 HTTP와 다르게 Stateful 프로토콜로 서버와 클라이언트 간의 연결을 항상 유지해야하며, 비정상적으로 연결이 끊어졌을때의 대비 필요
  - **SSE는 접속에 문제가 있으면 자동으로 재연결을 시도(3초 마다)**
- 웹 소켓은 계속 서버랑 handshake를 하고 있기에 배터리 사용량이 클 수 밖에 없음

## 3. 비교표

|                  | SSE              | Web Socket                    |
|------------------|------------------|-------------------------------|
| 브라우저         | 대부분           | 대부분의 모던 브라우저        |
| 통신             | 양방향           | 단방향 (서버에서 클라이언트)  |
| 실시간           | Y                | Y                             |
| 데이터 형태      | Binary, UTF-8    | UTF-8                         |
| 자동 재접속      | No               | 3초 마다 시도                 |
| 최대동시 접속 수 | 서버 셋업에 따라 | HTTP/1.1 6개, HTTP/2 100개    |
| 프로토콜         | websocket        | HTTP                          |
| 배터리 소모량    | 큼               | 작음                          |