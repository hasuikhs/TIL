# JavaScript Design Pattern

## 1. Design Pattern?

- 여러 사람이 협업해서 개발할 때 다른 사람이 작성한 코드, 기존에 존재하는 코드를 이해하는 것은 어려움
  - 이러한 코드를 수정하거나 새로운 기능을 추가해야 하는데 의도치 않은 결과나 버그를 방생시키기 쉽고 최적화도 어려움
  - 그로 인한 시간과 예산이 소모
- 디자인 패턴은 의사소통 수단의 일종으로서 이런 문제를 해결
- 개발을 진행하면서 발생하는 문제를 해결하는데 도움을 주는 일종의 증명된 기술들
- 이미 많은 개발자들이 JavaScript를 개발하면서 겪은 다양한 경험들을 바탕으로 만들어짐
- 디자인 패턴보다 **코드베이스의 간결성이 더 중요**하므로 모든 문제를 패턴을 써서 해결하려하면 안됨
- 디자인 패턴에 얽메이는 것보다 그 패턴이 왜 효율적인지를 이해해야 함

## 2. 패턴이 좋은 점

### 2.1 어휘력을 늘려 더 멋진 코드 만들기

- 기초 개념만으로 달여낸 코드가 가장 간단하고 이해하기 쉽다는 말은 미신임
  - 어휘력이 떨어지면 오히려 장황하고 비비 꼬인 프로그램으로 변질되기 쉬움
  - 결국, **'폭 넓은 어휘력'을 소유한 개발자가 더 우아한 코드를 작성할 수 있음**

###  2.2 잘 다듬고 테스트한 블록을 쌓아 믿음직한 코드 작성하기

- 전체적인 관점에서 보면 **패턴은 후반부에 불과**하며, **전반부에는 항상 테스트**가 자리함
  - 지극히 간단한 패턴이라도 테스트를 거치지 않으면 엉망이 됨
  - **패턴이 코드로 정확하게 잘 옮겨졌는지는 오직 테스트를 통해 장담 가능**
- 개발자들은 대부분 패턴 자체를 이용해서 코딩하는 것보다 패턴을 이용한 코드를 빈틈없이 테스트하는 방법을 모름
- 검증된 디자인 패턴을 잘 활용하고, 본인이 개발 중인 코드를 제대로 테스트하기 위한 최선의 지침을 잘 따른다면 기능은 물론 창의성 면에서도 매우 흡족한, 바른 코드를 개발할 수 있을 것

## 3. 종류

### 3.1 싱글톤 패턴
- 하나의 클래스에 오직 하나의 인스턴스만 가지는 패턴, 즉 객체를 여러번 호출 하지만 **메모리에 올라가는 인스턴스는 하나**
- 전역을 오염시키지 않고 싶을때 유용
- 시스템의 결합도가 높아지기 때문에 주의 필요
- 테스트할 때 테스트들이 서로 독립적이어야 하고 순서에 상관없이 실행이 가능해야하지만, 싱글톤 패턴은 하나의 인스턴스를 기반으로 하기에 TDD가 어려움
- 보통 DB 등의 I/O 연결 관련 모듈에 많이 사용 (Connection Pool 등)

```javascript
const a = {a: 1, b: 2};
const b = {a: 1, b: 2};

console.log(a === b); // false


class Ob {
  static a;
  constructor() {
    if (a) return a;

    this.name = 'test';
    a = this;
  }
}

const c = new Ob();
const d = new Ob();

console.log(c === d); // true
```