# 2. URL & 리소스

## 2.1 URL

- 웹과 URL이 있기 전에 사람들은 네트워크상에 흩어져 있는 데이터를 각자의 방식으로 접근

- **URL을 사용하면서 하나의 인터페이스를 통해 일관된 방식으로 많은 리소스에 접근 가능**

- URL은 온라인 세상을 단순화
- URL은 사용자가 정보를 찾는데 필요한 모든 것을 제공하며, 원하는 리소스가 어디에 위치하고 어떻게 가져오는지 정의

## 2.2 URL 문법

- 대부분의 URL은 일반 URL 문법을 따르며, 서로 다른 URL 스킴도 형태와 문법 면에서 매우 유사

- URL 스킴의 문법은 일반적으로 9개 부분으로 나뉨

  `<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프레그먼트>`

### 2.2.1 스킴

- 어떤 **프로토콜**을 사용하여 리소스를 요청해야 하는지 알려줌

- 스킴은 알파벳으로 시작해야 하고 URL의 나머지 부분들과 첫 번째 `:` (콜론) 으로 구분

### 2.2.2 호스트와 포트

- 리소스를 호스팅하고 있는 서버의 호스트 명이나 IP 주소를 가리킴
- 포트는 서버가 열어놓은 네트워크 포트를 가리킴

### 2.2.3 사용자 이름과 비밀번호

### 2.2.4 경로 

- 리소스가 서버의 어디에 있는지 알려줌

### 2.2.5 파라미터

- 많은 스킴이 객체에 대한 호스트 및 경로 정보만으로는 리소스를 찾지 못함
- 파라미터가 없다면 서버는 요청을 잘못 처리하거나 처리하지 않음
- URL의 파라미터는 **서버에 정확한 요청을 하기 위해 필요한 입력 파라미터를 받는데 사용**

### 2.2.6 질의 문자열

- DB 같은 서비스들은 요청받을 리소스 형식의 범위를 좁히기 위해서 질의를 받을 수 있음

- URL의 질의는 게이트웨이를 가리키는 URL의 경로와 함께 전달
- `&`로 나뉜 `key=value ` 쌍 형식의 질의 문자열

### 2.2.7 프래그먼트

- HTML 같은 리소스 형식들은 본래의 수준보다 더 작게 나뉠 수 있음
- 리소스에 대한 URL은 문서 전체를 가리키겠지만, 이상적으로는 **리소스 안에 있는 특정 절을 가리킬 수 있어야 함**
- **일반적으로 HTTP 서버는 객체 일부가 아닌 전체만 다루기 때문에, 서버에 프레그먼트를 전달히지 않음**

## 2.3 단축 URL

- 웹 클라이언트는 몇몇 단축 URL을 인식하고 사용
- 많은 브라우저가 사용자가 기억하고 있는 **URL 일부를 입력하면 나머지 부분을 자동으로 입력해주는 URL 자동 확장을 지원**

### 2.3.1 상대 URL

- URL에 스킴과 호스트 그리고 다른 컴포넌트 모두 입력하지 않아도 됨
- 이 정보들은 기저(base) URL 에서 알아낼 수 있음
  - 리소스에서 명시적으로 제공할 경우: 기저 URL은 HTML 문서 안에서 `<BASE>` 태그로 지정
  - 리소스를 포함하고 있는 경우 : 해당 리소스의 URL을 기저 URL로 사용 가능
  - 기저 URL이 없는 경우 : 보통 절대 URL 만으로 이루어져 있음

### 2.3.2 URL 확장

- 특정 브라우저들은 URL을 입력한 후나 입력하는 중간에 자동으로 URL을 확장
- **하지만 호스트 명에 대한 확장 기능은 프락시와 같은 다른 HTTP 애플리케이션에 문제 발생 야기 가능**

- **호스트 명 확장**
  - 단순한 휴리스틱만을 사용해서 입력한 호스트 명을 전체 호스트 명으로 확장 가능
  - 브라우저는 이런 간단한 기능을 제공하여 사용자의 시간 절약과 혼란 차단
- **히스토리 확장**
  - 사용자가 방문했던 URL의 기록을 저장

## 2.4 안전하지 않은 문자

- 문자가 제거되는 일을 피하고자 URL은 상대적으로 작고 일반적으로 안전한 알파벳 문자만 포함하도록 허락

- 하지만 **안전한 알파벳 외의 문자도 포함하려고 할 때는 이스케이프 기능을 추가하여 인코딩**

### 2.4.1 인코딩 체계

- 표현의 한계를 넘기 위해, URL에 있는 안전하지 않은 문자들을 표현할 수 있는 인코딩 방식 고안
- 인코딩은 안전하지 않은 문자를 `%`로 시작해, ASCII 코드로 표현되는 두 개의 16진수 숫자로 이루어어진 **이스케이프**로 변환

### 2.4.2 문자 제한

- 몇몇 문자는 URL 내에서 특별한 의미로 예약

| 문 자 | <center>선 점</center>                                     |
| :---: | ---------------------------------------------------------- |
|   %   | 인코딩된 문자에 사용할 이스케이 토큰으로 선점              |
|   /   | 경로 컴포넌트에 있는 경로 세그먼트를 나누는 용도로 선점    |
|   .   | 경로 컴포넌트에서 선점                                     |
|  ..   | 경로 컴포넌트에서 선점                                     |
|   #   | 프래그먼트의 구획 문자로 선점                              |
|   ?   | 질의 문자열의 구획 문자로 선점                             |
|   ;   | 파라미터의 구획 문자로 선점                                |
|   :   | 스킴, 사용자 이름/비밀번호, 호스트/포트의 구획 문자로 선점 |

