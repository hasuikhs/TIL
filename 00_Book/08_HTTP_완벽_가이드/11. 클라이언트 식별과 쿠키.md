# 11. 클라이언트 식별과 쿠키

## 11.1 개별 접촉

- HTTP는 익명으로 사용하며 상태가 없고 요청과 응답으로 통신하는 프로토콜
- 현대의 웹 사이트들은 개인화된 서비스를 제공하고 싶어함
  - **개별 인사**
  - **사용자 맞춤 추천**
  - **저장된 사용자 정보**
  - **세션 추적**

## 11.2 HTTP 헤더

| 헤더 이름       | 헤더 타입  | 설명                                     |
| --------------- | ---------- | ---------------------------------------- |
| From            | 요청       | 사용자의 이메일 주소                     |
| User-Agent      | 요청       | 사용자의 브라우저                        |
| Referer         | 요청       | 사용자가 현재 링크를 타고 온 근원 페이지 |
| Authorization   | 요청       | 사용자 이름과 비밀번호                   |
| Client-ip       | 확장(요청) | 클라이언트의 IP 주소                     |
| X-Forwarded-For | 확장(요청) | 클라이언트의 IP 주소                     |
| Cookie          | 확장(요청) | 서버가 생성한 ID 라벨                    |

## 11.3 클라이언트 IP 주소

- 클라이언트의 IP 주소는 보통 HTTP 헤더에 없지만 웹 서버는 HTTP 요청을 보내ㅅ는 반대쪽 TCP 커넥션의 IP 주소를 알아냄
- **클라이언트 IP 주소로 사용자를 식별하는 방식은 다음의 약점을 가짐**
  - 클라이언트 IP는 사용자가 아닌, 사용하는 컴퓨터를 가리킴, 여러 사용자가 같은 컴퓨터를 사용하면 식별 불가
  - 인터넷 서비스 제공자는 사용자가 로그인하면 동적으로 IP 주소를 할당, 웹 서버는 사용자를 IP 주소로 식별 불가
  - 보안을 강화하기 위해 만흔 사용자가 네트워크 주소 변환(NAT) 사용
    - NAT 장비들은 클라이언트의 실제 IP 주소를 방화벽 뒤로 숨김
    - 클라이언트의 실제 IP 주소를 내부에서 사용하는 하나의 방화벽 IP 주소(다른 포트 번호)로 변환
  - HTTP 프락시와 게이트웨이는 원 서버에 새로운 TCP 연결
    - 웹 서버는 클라이언트의 IP 주소 대신 프락시 서버의 IP 주소를 봄
- 클라이언트 IP 주소를 사용하는 것은 큰 의미가 없음