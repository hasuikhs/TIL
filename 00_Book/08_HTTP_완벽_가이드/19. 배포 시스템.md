# 19. 배포 시스템

## 19.1 배포 지원을 위한 FrontPage 서버 확장

- FrontPage는 다양한 기능을 제공하는 MS사의 웹 개발 및 배포 도구 집합

### 19.1.1 FrontPage 서버 확장

- MS사는 FrontPage 서버확장(FrontPage Server Extensions, FPSE)라는 서버 측 소프트웨어를 출시

- 서버 측 컴포넌트는 웹 서버와 통합되어 웹 사이트와 FrontPage를 구동시키는 클라이언트 사이에서 필요한 변환 작업 수행
- 초점을 맞춰야 할 부분은 FP 클라이언트와 FPSE 사이에서 사용하는 배포 프로토콜

- 이 프로토콜은 HTTP의 기본 의미를 바꾸지 않고서도 핵심 서비스에서 HTTP를 그대로 사용 가능하게 확장을 한 설계의 좋은 사례
- FP 배포 프로토콜은 HTTP POST 요청 위에 RPC 계층 구현
- 이를 사용하면 웹 사이트에 있는 문서를 갱신하고, 검색을 수행하고, 웹 개발자들 간에 공동 작업을 할 수 있게 FP 클라이언트가 서버에 명령을 보낼 수 있음
- 웹 서버는 FPSE에 맞춘 POST 요청을 받아 처리하는데, 클라이언트와 서버 사이에 방화벽과 프락시 서버가 있더라도 POST 메서드 통신만 가능하면 FP는 서버와 통신을 계속할 수 있음

### 19.1.2 FrontPage 용어

- **가상 서버**
  - 가상 서버는 웹 서버 한 개에서 웹 사이트 여러 개를 호스팅하며, 각 사이트는 브라우저에서 자체 전용 서버가 있는 것처럼 보임
  - 가상 서버를 지원하는 웹 서버를 다중 호스팅(multi-hosting) 웹 서버라 부름
  - 여러 개의 IP 주소로 구성된 장비는 다중 홈(multi-homed) 서버라 부름
- **루트 웹**
  - 루트 웹은 보통 웹 서버의 최상위 콘텐츠 디렉터리이거나 다중 호스팅 환경에서 가상 웹 서버의 최상위 콘텐츠 디렉터리
  - 루트 웹에 접근하려면 페이지 명을 기술하지 않고 서버의 URL만 기술하면 됨
  - 웹 서버에는 오직 한 개의 루트 웹만 존재
- **서브 웹**
  - 서브 웹은 루트 웹의 하위 디렉터리거나 완전한 FPSE 확장 웹인 다른 서브 웹의 하위 디렉터리
  - 서브 웹은 관리나 저작의 권한을 자체적으로 제한하는 완전히 독립적인 엔터티가 될 수 있음
  - 서브 웹은 검색 범위의 단위로 사용 가능

### 19.1.3 FrontPage RPC 프로토콜

- FrontPage 클라이언트와 FPSE는 자체 RPC 프로토콜을 사용해 통신
- 이 프로토콜은 RPC 메서드와 그와 관련한 변수를 POST 요청의 본문에 기술해서 HTTP POST를 감쌈
- 통신을 시작하려면, 클라이언트는 서버에 있는 대상 프로그램의 이름과 위치를 결정해야 함
- 이를 위해 클라이언트는 특별한 GET 요청을 보냄
- 파일이 반환되면, FrontPage 클라이언트는 응답을 읽고 FP와 관련된 값을 찾음
  - FPShtmlScriptUrl: '탐색 시간' 명령에 관한 POST 요청을 보낼 위치를 클라이언트에게 알려줌
  - FPAuthorScriptUrl: '저작 시간' 명령에 관한 POST 요청을 보낼 위치를 클라이언트에게 알려줌
  - FPAdginScriptUrl: 관리 동작에 관한 POST 요청이 실행되어야 할 위치를 알려줌

### 19.1.4 FrontPage 보안 모델

- 직접 웹 서버 콘텐츠에 접근하는 모든 배포 시스템은 배포하는 과정에서 보안에 신경을 써야 함
- FPSE 보안 모델은 사용자를 관리자, 저작자, 일반 사용자로 정의
- 각 사용자의 목록은 특정 FPSE 확장 웹에 따라 다르게 정의
- 모든 서브 웹은 루트 웹에서 권한으 상속받거나 자체 권한 존재
- IIS가 아닌 웹 서버는, 모든 FPSE 프로그램이 'executable' 표시가 된 디렉터리에 저장되어야 함
- FrontPage 서버 관리 유틸리티인 Fpsrvadm는 이런 목적으로 사용
- 보안이 정교하다 하더라도, FPSE를 활성화함으로써 생기는 보안상 위험에 관한 적지 않은 쓴 소리가 있었음
  - 대부분의 경우, 웹 사이트 관리자가 엉성하게 관리했기 때문
  - FPSE의 초기 버전에 있었던 심각한 보안상 허점이, 보안에 취약하다는 인식을 퍼뜨림
  - 튼튼한 보안 모델을 완벽히 구현하려고 했던 비밀스러운 방법들이 인식을 더 안좋게 만듦

