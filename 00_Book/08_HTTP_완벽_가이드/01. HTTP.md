# 1. HTTP

> - HTTP(Hyper Text Tranfer Protocol)는 인터넷에서 **데이터를 주고받을 수 있는 프로토콜**
> - 웹에서 이루어지는 모든 데이터 교환의 기초
> - 

## 1.1 HTTP: 인터넷의 멀티미디어 배달부

- HTTP는 전 세계의 웹 서버로부터 대량의 정보를 빠르고, 간편하고, 정확하게 웹브라우저로 옮겨줌

- HTTP는 신뢰성 있는 데이터 전송 프로토콜을 사용하기에 **데이터의 신뢰성을 보장**

## 1.2 웹 클라이언트와 서버

- 웹 서버는 인터넷의 데이터를 저장하고, HTTP 클라이언트가 요청한 데이터를 제공
- **클라이언트는 서버에게 HTTP 요청을 보내고, 서버는 요청된 데이터를 HTTP 응답으로 돌려줌**

## 1.3 리소스

- **웹 리소스는 웹 콘텐츠의 원천**
- 어떤 종류의 콘텐츠 소스도 리소스가 될 수 있음

### 1.3.1 미디어 타입

- 인터넷은 수많은 데이터 타입을 다루기에, **HTTP는 웹에서 전송되는 객체 각각에 MIME 타입을 데이터 포멧 라벨을 붙임**
  - **MIME(Multipurpose Internet Mail Extensions)** : 다른 메일 시스템 사이에서 메시지가 오가는 문제를 해결하기 위해 설계
  - MIME 타입은 `/`로 구분된 주 타입과 부 타입으로 이루어진 문자열 라벨(text/html, image/jpeg 등)

### 1.3.2 URI

- URI(Uniform Resource Identifier, 통합 자원 식별자)
- 인터넷에 있는 자원을 나타내는 유일한 주소
- URI는 URL과 URN으로 나뉨

### 1.3.3 URL

- URL(Uniform Resource Locator, 통합 자원 지시자)
- 특정 서버의 한 리소스에 대한 구체적인 위치를 서술
- 리소스가 정확히 어디있고 어떻게 접근 가능한지 분명히 알려줌
- 오늘날의 대부분의 URI는 URL로 볼 수 있음
- URL 구성
  - 스킴(Scheme) : 리소스에 접근하기 위해 사용되는 프로토콜 (`http://`)
  - 두번째 서버의 인터넷 주소(`www.example.com`)
  - 마지막은 웹 서버의 리소스를 가리킴 (`/files/image.jpg`)

### 1.3.4 URN

- URN(Uniform Resorce Name, 통합 자원 이름)
- 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할
- 위치 독립적인 URN은 리소스를 다른곳으로 옮기더라도 문제없이 동작 가능

## 1.4 트랜잭션

### 1.4.1 메서드

- 모든 HTTP 요청 메시지는 한 개의 메서드를 가짐

- 메서드는 서버에 어떤 동작을 해야할지 명시

  | <center>HTTP 메서드</center> | <center>설    명</center>                                 |
  | ---------------------------- | --------------------------------------------------------- |
  | `GET`                        | 클라이언트로 지정한 리소스를 반환                         |
  | `PUT`                        | 클라이언트에서 서버로 보낸 리소스를 저장                  |
  | `DELETE`                     | 지정한 리소스를 서버에서 삭제                             |
  | `POST`                       | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보냄 |
  | `HEAD`                       | 지정한 리소스에 대한 응답에서 HTTP 헤더 부분만 보내라     |

### 1.4.2 상태코드

- 모든 HTTP 응답 메시지는 상태 코드와 함께 반환

| HTTP 상태코드 | 설    명  |
| :-----------: | :-------: |
|      2xx      |   성공    |
|      4xx      | 요청 오류 |
|      5xx      | 서버 오류 |

## 1.5 메시지

- HTTP 메시지는 세 부분으로 이루어짐
  - **시작줄** : 요청이라면 무엇을 해야하는지 응답이라면 무슨 일이 일어났는지를 나타냄
  - **헤더 **:  시작줄 다음에는 0개 이상의 헤더 필드가 이어지고 **콜론(`:`)으로 구분된 key-value로 구성**되며, 헤더는 빈 줄로 끝남
  - **본문** : 빈 줄 다음에는 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문이 올 수 있음

## 1.6 TCP 커넥션

### 1.6.1 TCP/IP

- **TCP**
  - **TCP는 오류 없는 데이터 전송을 함**
  - **순서에 맞는 데이터를 전달** : 데이터는 언제나 보낸 순서대로 도착
  - **조각나지 않는 데이터 스트림(흐름)** : 언제든 어떤 크기로든 보낼 수 있음
- TCP/IP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합
- TCP/IP는 각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 장치든 신뢰성을 보장

### 1.6.2 접속, IP주소, 포트번호

- HTTP 메시지를 전송 하기 전에, **IP 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 먼저 맺어야함**
- 웹브라우저가 HTTP를 이용해 서버와 통신 순서
  1. 웹 브라우저는 서버의 URL에서 호스트 명 추출
  2. 웹 브라우저는 서버의 호스트 명을 IP로 변환
  3. 웹 브라우저는 URL에서 포트번호(존재시) 추출
  4. 웹 브라우저는 웹 서버와 TCP 커넥션을 맺음
  5. 웹 브라우저는 서버에 HTTP 요청
  6. 서버는 웹브라우저에 HTTP 응답
  7. 커넥션이 닫히면, 웹 브라우저는 문서를 보여줌

## 1.7 웹의 구성요소

### 1.7.1 프록시

- **클라이언트와 서버 사이에 위치**하여, 클라이언트의 모든 HTTP 요청을 서버에 전달
- 주로 **보안을 위해 사용**되어 **모든 웹 트래픽 흐름 속에서 신뢰성 있는 중개자 역할을 함**
- 요청과 응답을 필터링 

### 1.7.2 캐시

- 웹캐시와 캐시 프락시는 자신을 거쳐 가는 문서들 중 **자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버**

### 1.7.3 게이트웨이

- 다른 서버들의 **중개자로 동작하는 특별한 서버**
- 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용
- 게이트웨이는 언제나 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룸

### 1.7.4 터널

- 터널은 두 커넥션 사이에서 raw 데이터를 열어보지 않고 그대로 전달해주는 HTTP 어플리케이션

### 1.7.5 에이전시

- 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
- 웹 요청을 만드는 애플리케이션은 뭐든 HTTP 에이전트