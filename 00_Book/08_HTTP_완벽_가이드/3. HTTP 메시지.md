# 3. HTTP 메시지

## 3.1 메시지의 흐름

- HTTP 메시지는 HTTP 어플리케이션 간에 주고받은 데이터의 블록
- 데이터 블록들은 메시지의 내용과 의미를 설명하는 텍스트 메타 정보로 시작하고 선택적으로 데이터가 올 수 있음
- 이 메시지는 클라이언트, 서버, 프락시 사이를 흐름

### 3.1.1 메시지는 서버의 방향을 인바운드로 하여 송신

- **인바운드** : 메시지가 서버로 향하는 것
- **아웃바운드** : 모든 처리가 끝난 뒤에 메시지가 사용자에게 돌아오는 것

### 3.1.2 다운스트림으로 흐르는 메시지

- Request나 Response 관계없이 **모든 메시지는 다운스트림으로 흐름**
- 메시지의 발송자는 수신자의 업스트림

## 3.2 메시지의 각 부분

- Request 메시지 형식

  ```
  <메서드> <요청 URL> <버전>
  <헤더>
  
  <엔티티 본문>
  ```

- Response 메시지 형식

  ```
  <버전> <상태 코드> <사유 구절>
  <헤더>
  
  <엔티티 본문>
  ```

- **메서드**

  - 클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작 (예, GET, HEAD, POST)

  - **GET** : 주로 서버에게 리소스를 요청하기 위해 쓰임

  - **HEAD** : GET처럼 행동하지만, 서버는 **응답으로 헤더만을 돌려줌**

  - **PUT** : 서버가 요**청의 본문을 가지고 요청 URL의 이름대로 새 문서를 만들거나 수정**

  - **POST** : 서버에 입력 데이터를 전송하기 위해 설계, HTML 폼을 지원

  - **TRACE** : 클라이언트에게 자신의 요청이 서버에 도달했을 때 어떻게 보이게 되는지 알려줌

    ​               주로 진단을 위해 사용, 프락시나 다른 앱들이 **요청에 어떤 영향을 확인해보고자 사용**

  - **OPTIONS** : 서버에게 특정 리소스에 대해 **어떤 메서드가 지원되는지 확인** 가능

  - **DELETE** : 서버에게 요청 URL로 **지정한 리소스를 삭제**할 것을 요청

- **요청 URL**
  
  - 요청 대상이 되는 리소스를 지칭하는 완전한 URL 혹은 URL의 경로 구성요소
- **버전**
  
  - 이 메시지에서 사용 중인 HTTP의 버전
- **상태 코드**
  
  - 요청 중에 무엇이 일어났는지 설명하는 세 자리의 숫자
- **사유 구절(reason-phrase)**
  
  - 숫자로 이루어진 상태 코드의 의미를 설명해주는 짧은 문구
- **헤더들**
  - 이름, 콜론(:), 선택적인 공백, 값, CRLF(빈 줄)가 순서대로 나타는 0개의 헤더들
  - 이 헤더의 목록은 CRLF로 끝나 헤더 목록의 끝과 엔티티 본문의 시작을 표시
- **엔티티 본문**
  - 엔티티 본문은 임의의 데이터 블록을 포함
  - **모든 메시지가 엔티티 본문을 갖는 것은 아니므로** 메시지는 그냥 CRLF로 끝날 수 있음